(function(a){a.fn.drag=function(e,b,d){var c="string"==typeof e?e:"",f=a.isFunction(e)?e:a.isFunction(b)?b:null;0!==c.indexOf("drag")&&(c="drag"+c);d=(e==f?b:d)||{};return f?this.bind(c,d,f):this.trigger(c)};var f=a.event,c=f.special,d=c.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(e){var b=a.data(this,d.datakey),c=e.data||{};b.related+=1;a.each(d.defaults,function(a){void 0!==c[a]&&(b[a]=c[a])})},remove:function(){a.data(this,
d.datakey).related-=1},setup:function(){if(!a.data(this,d.datakey)){var e=a.extend({related:0},d.defaults);a.data(this,d.datakey,e);f.add(this,"touchstart mousedown",d.init,e);this.attachEvent&&this.attachEvent("ondragstart",d.dontstart)}},teardown:function(){(a.data(this,d.datakey)||{}).related||(a.removeData(this,d.datakey),f.remove(this,"touchstart mousedown",d.init),d.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",d.dontstart))},init:function(e){if(!d.touched){var b=e.data,j;
if(!(0!=e.which&&0<b.which&&e.which!=b.which)&&!a(e.target).is(b.not)&&(!b.handle||a(e.target).closest(b.handle,e.currentTarget).length))if(d.touched="touchstart"==e.type?this:null,b.propagates=1,b.mousedown=this,b.interactions=[d.interaction(this,b)],b.target=e.target,b.pageX=e.pageX,b.pageY=e.pageY,b.dragging=null,j=d.hijack(e,"draginit",b),b.propagates){if((j=d.flatten(j))&&j.length)b.interactions=[],a.each(j,function(){b.interactions.push(d.interaction(this,b))});b.propagates=b.interactions.length;
!1!==b.drop&&c.drop&&c.drop.handler(e,b);d.textselect(!1);d.touched?f.add(d.touched,"touchmove touchend",d.handler,b):f.add(document,"mousemove mouseup",d.handler,b);if(!d.touched||b.live)return!1}}},interaction:function(e,b){var c=a(e)[b.relative?"position":"offset"]()||{top:0,left:0};return{drag:e,callback:new d.callback,droppable:[],offset:c}},handler:function(e){var b=e.data;switch(e.type){case !b.dragging&&"touchmove":e.preventDefault();case !b.dragging&&"mousemove":if(Math.pow(e.pageX-b.pageX,
2)+Math.pow(e.pageY-b.pageY,2)<Math.pow(b.distance,2))break;e.target=b.target;d.hijack(e,"dragstart",b);b.propagates&&(b.dragging=!0);case "touchmove":e.preventDefault();case "mousemove":if(b.dragging){d.hijack(e,"drag",b);if(b.propagates){!1!==b.drop&&c.drop&&c.drop.handler(e,b);break}e.type="mouseup"}default:d.touched?f.remove(d.touched,"touchmove touchend",d.handler):f.remove(document,"mousemove mouseup",d.handler),b.dragging&&(!1!==b.drop&&c.drop&&c.drop.handler(e,b),d.hijack(e,"dragend",b)),
d.textselect(!0),!1===b.click&&b.dragging&&a.data(b.mousedown,"suppress.click",(new Date).getTime()+5),b.dragging=d.touched=!1}},hijack:function(e,b,c,g,i){if(c){var k=e.originalEvent,p=e.type,n=b.indexOf("drop")?"drag":"drop",l,o=g||0,h,m,g=!isNaN(g)?g:c.interactions.length;e.type=b;e.originalEvent=null;c.results=[];do if((h=c.interactions[o])&&!("dragend"!==b&&h.cancelled))m=d.properties(e,c,h),h.results=[],a(i||h[n]||c.droppable).each(function(g,i){m.target=i;e.isPropagationStopped=function(){return!1};
l=i?f.dispatch.call(i,e,m):null;!1===l?("drag"==n&&(h.cancelled=!0,c.propagates-=1),"drop"==b&&(h[n][g]=null)):"dropinit"==b&&h.droppable.push(d.element(l)||i);"dragstart"==b&&(h.proxy=a(d.element(l)||h.drag)[0]);h.results.push(l);delete e.result;if("dropinit"!==b)return l}),c.results[o]=d.flatten(h.results),"dropinit"==b&&(h.droppable=d.flatten(h.droppable)),"dragstart"==b&&!h.cancelled&&m.update();while(++o<g);e.type=p;e.originalEvent=k;return d.flatten(c.results)}},properties:function(a,b,c){var f=
c.callback;f.drag=c.drag;f.proxy=c.proxy||c.drag;f.startX=b.pageX;f.startY=b.pageY;f.deltaX=a.pageX-b.pageX;f.deltaY=a.pageY-b.pageY;f.originalX=c.offset.left;f.originalY=c.offset.top;f.offsetX=f.originalX+f.deltaX;f.offsetY=f.originalY+f.deltaY;f.drop=d.flatten((c.drop||[]).slice());f.available=d.flatten((c.droppable||[]).slice());return f},element:function(a){if(a&&(a.jquery||1==a.nodeType))return a},flatten:function(c){return a.map(c,function(b){return b&&b.jquery?a.makeArray(b):b&&b.length?d.flatten(b):
b})},textselect:function(c){a(document)[c?"unbind":"bind"]("selectstart",d.dontstart).css("MozUserSelect",c?"":"none");document.unselectable=c?"off":"on"},dontstart:function(){return!1},callback:function(){}};d.callback.prototype={update:function(){c.drop&&this.available.length&&a.each(this.available,function(a){c.drop.locate(this,a)})}};var k=f.dispatch;f.dispatch=function(c){if(0<a.data(this,"suppress."+c.type)-(new Date).getTime())a.removeData(this,"suppress."+c.type);else return k.apply(this,
arguments)};var i=f.fixHooks.touchstart=f.fixHooks.touchmove=f.fixHooks.touchend=f.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(c,b){if(b){var d=b.touches&&b.touches[0]||b.changedTouches&&b.changedTouches[0]||null;d&&a.each(i.props,function(a,b){c[b]=d[b]})}return c}};c.draginit=c.dragstart=c.dragend=d})(jQuery);
(function(a){var f=a.event,c=f.special.drag,d=c.add,k=c.teardown;c.noBubble=!1;c.livekey="livedrag";c.add=function(i){d.apply(this,arguments);var e=a.data(this,c.datakey);!e.live&&i.selector&&(e.live=!0,f.add(this,"draginit."+c.livekey,c.delegate))};c.teardown=function(){k.apply(this,arguments);var d=a.data(this,c.datakey)||{};d.live&&(f.remove(this,"draginit."+c.livekey,c.delegate),d.live=!1)};c.delegate=function(d){var e=[],b,j=a.data(this,"events")||{};a.each(j||[],function(g,j){0===g.indexOf("drag")&&
a.each(j||[],function(j,g){if(b=a(d.target).closest(g.selector,d.currentTarget)[0])f.add(b,g.origType+"."+c.livekey,g.origHandler||g.handler,g.data),0>a.inArray(b,e)&&e.push(b)})});return!e.length?!1:a(e).bind("dragend."+c.livekey,function(){f.remove(this,"."+c.livekey)})}})(jQuery);(function(){var a=!1,f=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.create=function(c){function d(){!a&&this.initialize&&this.initialize.apply(this,arguments)}var k=this.prototype;a=!0;var i=new this;a=!1;for(var e in c)i[e]="function"==typeof c[e]&&"function"==typeof k[e]&&f.test(c[e])?function(a,c){return function(){var d=this._super;this._super=k[a];var f=c.apply(this,arguments);this._super=d;return f}}(e,c[e]):c[e];d.prototype=i;d.constructor=d;d.create=arguments.callee;
return d}})();window.$j={regex:{empty:/^.*$/,bit:/^(0|1)$/,num:/^-?([0-9]*)$/,alpha:/^[a-zA-z\s]+$/,alphanum:/^[a-zA-Z0-9]?[\s||\'||\"||\.||\?||\!||\-||a-zA-Z0-9]+$/,email:/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,phone:/^([0-9]{3}( |-|.)?)?(\(?[0-9]{3}\)?|[0-9]{3})( |-|.)?([0-9]{3}( |-|.)?[0-9]{4}|[a-zA-Z0-9]{7})$/,cc:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,zip:/^(([0-9]{5})|([0-9]{5}[-][0-9]{4}))$/,
decimal:/^\d+\.\d{0,4}$/,price:/^\$?\s?[0-9\,]+(\.\d{0,4})?$/},init:function(){this.tabs={};this.forms={};this.msgs={};this.msg_index=0;this.slideshows={};this.dropdowns={};this.popups={};this.popup_index=0;this.crontab={};this.crontab_index=0;$(document).ready(function(){$j.init_dom()})},init_dom:function(){$(document).mousemove(this.get_mouse_position);this.get_viewport_dimensions();$(window).resize(this.get_viewport_dimensions)},get_mouse_position:function(a){$j.mouse={x:a.pageX,y:a.pageY}},get_viewport_dimensions:function(){$j.viewport=
{x:$(window).width(),y:$(window).height()}},msg:function(a){this.messenger.create(a)},hello_world:function(){this.msg({type:"success",content:"<h2>Hello World!</h2><p>If you're seeing this message, it means jive is ready to use!</p>",sticky:1})},cron:function(a,f,c){var c=c?c:this.crontab_index++,d={created:new Date,stop:function(){clearTimeout(this.timer)},timer:setInterval(function(){a(d)},f)};this.crontab[c]=d}};$j.init();window.$j.canopy={create:function(){$j.canopy.container=$('<div id="canopy"/>').append($('<div id="canopy-close-btn"/>').text("Close").click($j.canopy.close));$j.canopy.overlay=$('<div id="canopy-overlay"/>');$(document.body).append($j.canopy.overlay).append($j.canopy.container)},display:function(){$j.canopy.container||$j.canopy.create();$j.canopy.overlay.show();$j.canopy.container.show()},close:function(){$j.canopy.overlay.hide();$j.canopy.container.hide()}};var Messenger=Class.create({initialize:function(){var a=this;this.container=$('<div id="jive-messenger"/>');this.messages_container=$('<div id="jive-messenger-messages"/>');this.close_btn=$('<div id="jive-messenger-close" style="display:none;"/>').text("x").click(this.close);$(document).ready(function(){a.container.append(a.messages_container);a.container.append(a.close_btn);$(document.body).append(a.container)})},create:function(a){var f=this,a={id:"msg-"+$j.msg_index,type:a.type?a.type:"notify",
content:a.content,timer:a.timer?a.timer:5E3,sticky:a.sticky?a.sticky:!1};a.container=$('<div class="jive-msg jive-msg-'+a.type+'" id="'+a.id+'"/>').append($('<div class="jive-msg-contents"/>').html(a.content));a.sticky?this.close_btn.show():this.close_btn.hide();this.messages_container.append(a.container);this.container.show();$j.msgs[$j.msg_index]=a;$j.msg_index++;a.sticky||setTimeout(function(){f.close()},a.timer)},clear:function(){this.close_btn.hide();this.messages_container.empty()},close:function(){$j.messenger.container.fadeOut();
setTimeout(function(){$j.messenger.messages_container.html("")},1E3)}});$j.messenger=new Messenger;var Tabs=Class.create({initialize:function(a){this.container_id=a.container;this.update_dom(this.container_id,a.index);$j.tabs[a.container]=this},update_dom:function(a,f){var c=this;this.container=$("#"+a);this.tabs=this.container.find(".tab");this.panels=this.container.find(".panel");this.current_index=f?f:0;this.tabs.each(function(a){$(this).click(function(){c.current_index!=a&&c.show_tab(a)})});this.panels.hide();this.show_tab(this.current_index)},show_tab:function(a){this.current_index=a;this.panels.hide();
this.container.find("#"+this.tabs[a].id.replace("tab-","panel-")).show()},next_tab:function(){this.show_tab((this.current_index+1+this.tabs.length)%this.tabs.length)},previous_tab:function(){this.show_tab((this.current_index+1+this.tabs.length)%this.tabs.length)},add_tab:function(a){this.container.append(a.tab,a.panel);this.update_dom(this.container_id)}});$(document).ready(function(){$(".jive-tabs").each(function(){new Tabs({container:this.id})})});var JiveForm=Class.create({initialize:function(a){var f=this;this.config=a;this.container=$("#"+a.container);this.form_name=this.container.attr("name");this.fields={text:this.container.find("input[type=text]"),textareas:this.container.find("textarea"),radios:this.container.find("input[type=radio]"),checkboxes:this.container.find("input[type=checkbox]"),selects:this.container.find("select"),submits:this.container.find("input[type=submit]"),buttons:this.container.find("button")};this.clicked=null;this.fields.buttons.click(function(a){a.preventDefault();
f.clicked=this;f.submit(a)});this.container.submit(function(a){f.submit(a)});$j.forms[a.container]=this},validate:function(){for(var a in this.fields)"submits"!=a&&"buttons"!=a&&this.fields[a].each(function(){$(this).attr("disabled","disabled");for(var a in $j.regex)$(this).hasClass("valid-"+a)&&($j.regex[a].test(this.value)?($(this).addClass("valid"),$(this).removeClass("invalid")):($(this).addClass("invalid"),$(this).removeClass("valid")));$(this).removeAttr("disabled")});this.valid_fields=this.container.find(".valid");
this.invalid_fields=this.container.find(".invalid");return 0==this.invalid_fields.length?!0:!1},submit:function(a){a.preventDefault();this.ajax_url=this.container.attr("action")+"?"+this.container.serialize();if(this.validate())if(this.success_callback)this.success_callback(this);else return!0;else if(this.failure_callback)this.failure_callback(this);else return!1},success:function(a){this.success_callback=a},failure:function(a){this.failure_callback=a},reset:function(){for(var a in this.fields)switch(a){case "text":this.fields[a].each(function(){$(this).attr("value",
"")})}}});$(document).ready(function(){$(".jive-form").each(function(){new JiveForm({container:this.id})})});var Dropdown=Class.create({initialize:function(a){var f=this;this.container=$("#"+a.container);this.menu=this.container.find("> .dropdown-menu");this.timer=a.timer?a.timer:200;this.open=!1;this.container.mouseenter(function(){f.display()});this.container.mouseleave(function(){f.close()});$j.dropdowns[a.container]=this},display:function(){var a=this;clearTimeout(this.timeout);this.open||(this.timeout=setTimeout(function(){a.open=!0;a.menu.slideDown(a.timer)},this.timer))},close:function(){var a=this;
clearTimeout(this.timeout);this.open&&(this.timeout=setTimeout(function(){a.open=!1;a.menu.slideUp(a.timer)},this.timer))}});$(document).ready(function(){$(".dropdown").each(function(){new Dropdown({container:this.id})})});var Popup=Class.create({initialize:function(a){var f=this,a=$.extend({container:"popup-"+$j.popup_index++,title:"",html:!1,width:$j.viewport.x/2,height:$j.viewport.y/2,top:($j.viewport.y-this.height)/2,left:($j.viewport.x-this.width)/2,offset:{top:50,left:50},confirm_close:!1,drag:!1,minimize:!1,resize_ondrag:!1},a);this.container_id=a.container;this.container=$('<div id="'+this.container_id+'" class="popup"/>').append($('<div class="popup-toolbar"/>').append($('<div class="popup-title"/>').html(a.title),
$('<div class="popup-close"/>').text("x").click(function(){f.close()})));a.html&&this.set_contents(a.html);this.width=a.width;this.height=a.height;this.static_dimensions=a.width&&a.height?!0:!1;this.position={top:a.top,left:a.left,top_static:a.top?!0:!1,left_static:a.left?!0:!1};this.offset=a.offset;this.container.css({width:f.width,height:f.height,top:f.position.top,left:f.position.left});this.confirm_close=a.confirm_close;this.drag=a.drag;this.minimize=a.minimize;this.resize_ondrag=a.resize_ondrag;
$j.popups[this.container_id]=this;$(document.body).append(this.container);this.drag&&this.container.drag(function(a,d){$(this).css({top:d.offsetY,left:d.offsetX})},{handle:".popup-toolbar"});this.resize_ondrag&&(this.container.append($('<div class="popup-resize"/>')),this.container.drag("start",function(a,d){d.width=$(this).width();d.height=$(this).height()}).drag(function(a,d){$(this).css({width:Math.max(20,d.width+d.deltaX),height:Math.max(20,d.height+d.deltaY)})},{handle:".popup-resize"}));$(window).resize(function(){f.update()});
this.update()},update:function(){this.static_dimensions||this.resize();this.reposition();this.container.css({width:this.width,height:this.height,top:this.position.top,left:this.position.left})},reposition:function(){this.position.top_static||(this.position.top=($j.viewport.y-this.height)/2,this.position.top<this.offset.top&&(this.position.top=this.offset.top));this.position.left_static||(this.position.left=($j.viewport.x-this.width)/2,this.position.left<this.offset.left&&(this.position.left=this.offset.left))},
resize:function(){this.width=$j.viewport.x/2;this.height=$j.viewport.y/2},close:function(a){this.confirm_close?confirm("Are you sure you would like to close this window?")&&(a?(this.container.remove(),delete $j.popups[this.container_id]):this.container.hide()):a?(this.container.remove(),delete $j.popups[this.container_id]):this.container.hide()},set_title:function(a){this.container.find(".popup-title").html(a)},set_contents:function(a){this.container.html(a)}});$j.modal={display:function(a){a=$.extend({container:"modal"},a);new Popup(a);this.popup=$j.popups.modal;$j.canopy.display();$("#canopy-close-btn").hide();$("#modal").find(".popup-close").addClass("btn btn-large");$("#modal").find(".popup-close").click(function(){$j.canopy.close()})},close:function(){$j.canopy.close();this.popup.close()},resize:function(a){this.popup.width=a.width;this.popup.height=a.height;this.popup.update()}};